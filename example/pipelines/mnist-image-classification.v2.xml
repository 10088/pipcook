<pipeline specVersion="2.0"
  pipcook:framework="^tensorflow@2"
  pipcook:from="https://cdn.jsdelivr.net/gh/imgcook/dataset@main/cv/mnist.mjs">
  <dataflow format="https://cdn.jsdelivr.net/gh/imgcook/pipcook-scripts@main/formats/pascalvoc.mjs">
    <script src="https://cdn.jsdelivr.net/gh/imgcook/pipcook-scripts@main/processors/resize-image.mjs?size=224" />
    <script src="https://cdn.jsdelivr.net/gh/imgcook/pipcook-scripts@main/processors/normalize.mjs" />
    <script>
      const data = window.getFromData().nextBatch();
      // process data
      export data;
    </script>
  </dataflow>
  <!-- here is the base model, which could be model define plugin and pre-trained model -->
  <model base="https://cdn.jsdelivr.net/gh/imgcook/pipcook-models@main/cv/mobilenet.mjs">
    <script>
      // here we added layers
      const model = context.getModel();
      model.addLayer(tf.keras.layers.Dense(...));
      export model;
    </script>
  </model>
  <train epochs="20">
    // optional train script
  </train>
  <artifacts>
    <artifact type="local" path="./file/to/your/model/dir" />
    <artifact type="aliyun-oss" path="pipcook/pretrained-models/mobilenet/v1" auth="***" />
  </artifacts>
</pipeline>
